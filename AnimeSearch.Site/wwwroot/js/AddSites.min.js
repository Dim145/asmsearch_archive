var tabSearch=["one piece","naruto","fairy tail","bleach","lucifer","black clover","black mirror","nanatsu no taizai","attaque des titans"],indexSearch=0;$(document).ready(function(){var a=[$("#baseURL"),$("#searchURL"),$("#iconURL"),$("#siteTitle"),$("#type"),$("#cheminElt"),$("#idDoc"),$("#cheminRes")],c=$("#urlbase").attr("href");function b(b){var a=b.originalEvent.clipboardData.getData("text")+"";a.startsWith("http")&&($(this).val(a.substr(a.indexOf("//")+2)),b.preventDefault())}function d(d=-1){for(var e={},f=$("#POST-values").children().length,b=0;b<f;b++){var c=$("#name"+b).val(),a=$("#val"+b).val();""!=c&& void 0!=c&& void 0!=a&&""!=a&&("?"==a&&(a=-1!=d?tabSearch[d]:null),e[c]=a)}return e}function e(a){var b=indexSearch++,e=d(b);$.post(c+"GetHTMLSite?url="+encodeURIComponent(a+(a.endsWith("=")?tabSearch[b]:"")),e,function(a){let c=$("#site").text("");c.append(a),(c=$("#site2").text("")).append(a),$("#dataSearch").text(tabSearch[b]),$("#dataSearch2").text(tabSearch[b])}).fail(function(){SwalFire({title:"Erreur lors du chargement du site saisi.",icon:"error",confirmButtonText:"Ok"})}),indexSearch>=tabSearch.length&&(indexSearch=0)}function f(){var c=!0;if($.each(a,function(b,a){a[0].validity.valid||(c=!1)}),c){if(void 0==$("#valider")[0]){var b=$("<button>").attr("id","valider").addClass(["btn","btn-dark","btn-outline-light"]).text("Valider");$("#valid-Zone").append(b),b.click(g)}}else $("#valider").remove()}function g(){var b={url:$("#httpType").val()+a[0].val(),urlSearch:a[1].val(),urlIcon:$("#httpTypeIcon").val()+a[2].val(),title:a[3].val(),typeSite:a[4].val(),cheminBaliseA:a[5].val(),idBase:a[6].val(),postValues:d(-1),is_inter:$("#lang").is(":checked"),cheminToNbResult:a[7].val()};$.post(c+"api/addSite",b,function(a){SwalFire({title:a,icon:"success",confirmButtonText:"Ok"})}).fail(function(a){SwalFire({title:a.responseText,icon:"error",confirmButtonText:"Ok"})})}a[0].focusout(function(e){var d=$(this),b=$("#httpType").val();b+=d.val(),$.get(c+"testURL?url="+encodeURIComponent(b),function(){d[0].setCustomValidity(""),f()}).fail(function(){d[0].setCustomValidity("adresse inateignable"),a[1][0].setCustomValidity("adresse inateignable"),f(),$("#btnDiv").hide("fast"),$("#btnDivRes").hide("fast")})}),a[0].on("paste",b),a[1].focusout(function(){var b=$(this).val(),g=$("#POST-values").children().length;if((""==b|| void 0==b)&&g<=0)f(),$("#btnDiv").hide("fast"),$("#btnDivRes").hide("fast");else{var h=this,d=$("#httpType").val();d+=a[0].val()+"/"+b,$.get(c+"testURL?url="+encodeURIComponent(d),function(){h.setCustomValidity(""),f(),e(d),$("#btnDiv").show("fast"),$("#btnDivRes").show("fast")}).fail(function(){h.setCustomValidity("adresse inateignable"),f(),$("#btnDiv").hide("fast"),$("#btnDivRes").hide("fast")})}}),a[2].focusout(function(){var b=this,a=$("#httpTypeIcon").val()+$(this).val();$.get(c+"testURL?url="+encodeURIComponent(a),function(){$("#imageIcon").attr("src",a),b.setCustomValidity(""),f()}).fail(function(){$("#imageIcon").attr("src",""),b.setCustomValidity("adresse inateignable"),f()}),f()}),a[2].on("paste",b),a[3].focusout(function(){f()}),a[4].focusout(function(){f()}),a[5].focusout(function(){f()}),a[6].focusout(function(){f()}),$("#dialogIframe").on("hidden.bs.modal",function(a){f()}),$("#dialogPOST").on("hidden.bs.modal",function(b){f(),a[1].focus(),$(this).focus()}),$("#site").click(function(e){$("#btnFermer").click();let b=$(e.target),d="";for(e.preventDefault();void 0!=b[0]&&"site"!=b[0].id&&"body"!=b[0].localName;){if(void 0!=b[0].localName){let f="/"+b[0].localName,c=b.attr("class");void 0!=c&&""!=c&&0>=c.indexOf(" ")&&0>=c.indexOf("-")&&(f+="[@class='"+c+"']"),d=f+d}b=b.parent()}a[5].val(d.substr(1)),a[6].val("")}),$("#site2").click(function(e){$("#btnFermer2").click();let b=$(e.target),d="";for(e.preventDefault();void 0!=b[0]&&"site2"!=b[0].id&&"body"!=b[0].localName;){if(void 0!=b[0].localName){let f="/"+b[0].localName,c=b.attr("class");void 0!=c&&""!=c&&0>=c.indexOf(" ")&&0>=c.indexOf("-")&&(f+="[@class='"+c+"']"),d=f+d}b=b.parent()}a[7].val(d.substr(1))}),$("#research").click(function(){var b=$("#httpType").val();e(b+=a[0].val()+"/"+a[1].val())}),$("#addPOST").click(function(){var a=$("<tr>"),b=$("#POST-values"),c=b.children().length;a.append($("<td>").append($("<input>").addClass("w-100").attr("id","name"+c))),a.append($("<td>").append($("<input>").addClass("w-100").attr("id","val"+c))),b.append(a)})})