@using AnimeSearch.Data.Models
@using AnimeSearch.Core
@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["title"];
}

<header>
    <script type="text/javascript" src="~/js/AddSites.min.js"></script>
    <link rel="stylesheet" href="~/css/AddSites.min.css" />
    <link rel="stylesheet" href="~/lib/switchios/component-custom-switch.min.css" />
</header>

<div class="container text-white text-center">
    <h1>@ViewData["Title"]</h1>
</div>

<div class="container text-white">
    <p>
        @Localizer.GetHtml("descr")
    </p>
</div>

<div class="container text-white">
    <div class="row">
        <div class="col" title="@Localizer["url_tooltip"]">
            <label for="baseURL">@Localizer["url_site"]</label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <select class="btn btn-outline-secondary"
                            type="button" id="httpType">
                        <option>https://</option>
                        <option>http://</option>
                    </select>
                </div>
                <input type="text" id="baseURL" class="form-control" placeholder="otakufr.co" pattern="[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$" required />
                <div class="input-group-append">
                    <span class="input-group-text">/</span>
                </div>
                <input type="text" id="searchURL" placeholder="toute-la-liste-affiches/?q=" class="form-control rounded-right" />
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-md" title="@Localizer["icon_url_tooltip"]">
            <label for="iconURL">@Localizer["icon_url"]</label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <select class="btn btn-outline-secondary"
                            type="button" id="httpTypeIcon"
                            aria-haspopup="true" aria-expanded="false">
                        <option>https://</option>
                        <option>http://</option>
                    </select>
                </div>
                <input type="text" id="iconURL" class="form-control rounded-right" placeholder="i.ibb.co/YWFp87J/otakufr.png" pattern="[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$" required />
            </div>
        </div>

        <div class="col-12 col-md-auto text-center" style="display: flex;" title="@Localizer["icon_tooltip"]">
            <img id="imageIcon" class="image-icon" alt="404" />
        </div>
    </div>

    <div class="row">
        <div class="col" title="@Localizer["name_tooltip"]">
            <label for="siteTitle">@Localizer["name"]</label>
            <div class="input-group mb-3">
                <input class="form-control rounded" type="text" maxlength="20" id="siteTitle" placeholder="OtakuFr" required />
            </div>
        </div>

        <div class="col-12 col-md" title="@Localizer["type_tooltip"]">
            <label for="type">@Localizer["type"]</label>
            <div class="input-group mb-3">
                <select class="custom-select form-control btn-outline-secondary" id="type">
                    @if (ViewData["types"] is TypeSite[] types)
                    {
                        @foreach (TypeSite type in types)
                        {
                            <option>@type.Name</option>
                        }
                    }
                    else
                    {
                        @foreach (string str in TypeEnum.TabTypes)
                        {
                            <option>@str</option>
                        }
                    }
                </select>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-auto" title="@Localizer["id_result_tooltip"]">
            <label for="idDoc">@Localizer["id_result"]</label>
            <div class="input-group mb-3">
                <input type="text" maxlength="10" id="idDoc" class="form-control rounded" placeholder="app-otaku (optionnel)" />
            </div>
        </div>
        
        <div class="col-12 col-md" title="@Localizer["a_path_tooltip"]">
            <label for="cheminElt">@Localizer["a_path"]</label>
            <div class="input-group mb-3">
                <input type="text" class="form-control rounded" id="cheminElt" placeholder="section/div/div/div/div/article/div/div/div/a" pattern=".*a$" required />
                <button style="display: none;" id="btnDiv" class="rounded-circle" data-toggle="modal" data-target="#dialogIframe" title="@Localizer["btn_a_path_tooltip"]"><img class="search-img" width="20" src="~/webfonts/search.svg" /></button>
            </div>
        </div>
        
        <div class="col-12">
            <label for="cheminRes">@Localizer["nb_res_path"]<u>@Localizer["optional"]</u></label>
            <div class="input-group mb-3">
                <input type="text" class="form-control rounded" id="cheminRes" placeholder="(@Localizer["optional"]): div/div[@@class='container']/article/div/div/div/p" />
                <button style="display: none;" id="btnDivRes" class="rounded-circle" data-toggle="modal" data-target="#dialogIframe2" title="@Localizer["btn_a_path_tooltip"]">
                    <img class="search-img" width="20" src="~/webfonts/search.svg"/>
                </button>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-auto text-left">
            <button class="btn btn-dark border" data-toggle="modal" data-target="#dialogPOST" title="@Localizer["post_tooltip"]">+ POST</button>
        </div>
        <div class="=col-auto row" title="@Localizer["multi_tooltip"]">
            <div class="col-auto align-self-center" style="padding-right: 0;"><p style="margin: 0;">Site </p></div>
            <div class="col" style="padding-left: 5px;">
                <div class="custom-switch custom-switch-label-status pl-0 ">
                    <input class="custom-switch-input" id="lang" type="checkbox">
                    <label class="custom-switch-btn" for="lang"></label>
                </div>
            </div>
        </div>

        <div class="col text-right" id="valid-Zone" style="padding-left: 0;">

        </div>
    </div>
</div>

<footer>
        <a style="display: none;" class="d-none" href="~/" id="urlbase"></a>
    <!-- Modal Site -->
    <div class="modal fade" id="dialogIframe" tabindex="-1" role="dialog" aria-labelledby="ajout" aria-hidden="true">
        <div class="modal-dialog" role="document" id="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">@Localizer["modal_site_title"]</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>
                        @Localizer.GetHtml("modal_site_descr") <a id="dataSearch"></a>
                    </p>

                    <div id="site">

                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="research">@Localizer["modal_btn_change"]</button>
                    <button type="button" class="btn btn-primary" id="btnFermer" data-dismiss="modal">@Localizer["close"]</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="dialogIframe2" tabindex="-1" role="dialog" aria-labelledby="ajout2" aria-hidden="true">
            <div class="modal-dialog" role="document" id="modal2">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">@Localizer["modal_site_title"]</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            @Localizer.GetHtml("modal_site_descr_2") <a id="dataSearch2"></a>
                        </p>
    
                        <div id="site2">
    
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="research2">@Localizer["modal_btn_change"]</button>
                        <button type="button" class="btn btn-primary" id="btnFermer2" data-dismiss="modal">@Localizer["close"]</button>
                    </div>
                </div>
            </div>
        </div>

    <!-- Modal POST -->
    <div class="modal fade" id="dialogPOST" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="max-height: 90vh;">
                <div class="modal-header">
                    <h5 class="modal-title">@Localizer["modal_post_title"]</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body overflow-auto">
                    <p>@Localizer.GetHtml("modal_post_descr")</p>
                    <table class="table table-striped table-bordered">
                        <thead class="text-center">
                            <tr>
                                <th>@Localizer["nom"]</th>
                                <th>@Localizer["Value"]</th>
                            </tr>
                        </thead>
                        <tbody id="POST-values">
                        </tbody>
                    </table>

                    <button class="btn btn-dark border rounded-circle text-center align-middle" id="addPOST" style="background-color: lawngreen;">+</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">@Localizer["close"]</button>
                </div>
            </div>
        </div>
    </div>

    <partial name="~/Views/Shared/ModalMessage.cshtml" />
</footer>

@{
    ViewData["aideHTML"] = Localizer["help"].Value;
}